{% extends 'portafolio/base.html' %}
{% load i18n %}

{% block title %}{% trans "Colaboración - El Portafolio de Marcos" %}{% endblock %}

{% block content %}
<section id="donativos" class="py-5">
    <div class="container">
        <h1 class="category-title text-center mb-5 border-bottom pb-3">{% trans "Apoyo al Proyecto" %}</h1>

        <p class="fs-5 text-center mb-6">
            {% trans "Este proyecto se mantiene gracias a la pasión por la fotografía y al apoyo voluntario de quienes lo valoran.  Los donativos son opcionales y ayudan a mantener esta iniciativa viva." %}
        </p>

        <div class="row justify-content-center">
            {% for opcion in opciones %}
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow p-3">
                    <!-- Monto grande y en negrita -->
                    <h3 style="font-size: 1.5rem; font-weight: bold;">€ {{ opcion|floatformat:2 }}</h3>
                    <p class="card-text">
                        <!-- Monto grande y en negrita en la frase -->
                        Haz una donación de <strong>€ {{ opcion|floatformat:2 }}</strong> para apoyar el proyecto.
                    </p>
                    <form action="" method="POST" class="donation-form">
                        {% csrf_token %}
                        <input type="hidden" name="monto" value="{{ opcion|floatformat:2 }}">
                        <input type="hidden" name="tarjeta" value="{{ forloop.counter }}">
                        <button type="submit" class="btn donar-btn mt-3">{% trans "Donar ahora" %}</button>
                    </form>
                    {% if tarjeta_enviada == forloop.counter|stringformat:"s" %}
                        <div class="mensaje-enviado mt-2 text-center fw-bold text-success">
                            <!-- Monto grande y en negrita en el mensaje -->
                            ¡Muchas gracias! Tu donativo de <strong>€ {{ opcion|floatformat:2 }}</strong> ha sido registrado.
                        </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}

            <!-- Tarjeta fija de 50 € -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow p-3">
                    <h3 style="font-size: 1.5rem; font-weight: bold;">€ 50</h3>
                    <p class="card-text">
                        {% trans "Haz una donación de <strong>€ 50 </strong> para apoyar el proyecto." %}
                    </p>
                    <form action="" method="POST" class="donation-form">
                        {% csrf_token %}
                        <input type="hidden" name="monto" value="50.00">
                        <input type="hidden" name="tarjeta" value="50">
                        <button type="submit" class="btn donar-btn mt-3">{% trans "Donar ahora" %}</button>
                    </form>
                    {% if tarjeta_enviada == "50" %}
                        <div class="mensaje-enviado mt-2 text-center fw-bold text-success">
                            {% trans "¡Muchas gracias! Tu donativo de <strong>€ 50 </strong> ha sido registrado." %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Tarjeta de monto libre -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow p-3">
                   
                    <form action="" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="tarjeta" value="libre">
                        <div class="form-group mb-3">
                            <label for="donativo-monto" class="text-center-label">{% trans "Ingresa el monto:" %}</label>
                            <input type="number" step="0.01" class="form-control" id="donativo-monto" name="monto" placeholder="{% trans 'Ej: 15' %}">
                        </div>
                        <button type="submit" class="btn donar-btn mt-3">{% trans "Donar ahora" %}</button>
                    </form>
                    {% if tarjeta_enviada == "libre" %}
                        <div class="mensaje-enviado mt-2 text-center fw-bold text-success">
                            {% blocktrans with mensaje_enviado=mensaje_enviado %}¡Muchas gracias! Tu donativo de <strong>€ {{ mensaje_enviado }}</strong> ha sido registrado.{% endblocktrans %}
                        </div>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
</section>
{% endblock %}
